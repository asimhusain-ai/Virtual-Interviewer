<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page == 'start' %}IntervBot • Practice Smarter{% elif page == 'quiz' %}Quiz | Virtual Interviewer{% elif page == 'admin' %}{{ title or 'Admin Panel' }} • IntervBot{% else %}Virtual Interviewer{% endif %}</title>
    {% if page == 'admin' %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/start.css') }}">
    {% else %}
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/start.css') }}">
    {% if page == 'quiz' %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/quiz.css') }}">
    {% endif %}
    {% endif %}
    <link rel="icon" href="{{ url_for('static', filename='assets/favicon.png') }}">
    <script>
      // Expose auth state to client scripts to prevent unauthorized calls
      (function () {
        var body = document.body;
        var flag = body ? body.getAttribute('data-is-authenticated') : 'false';
        window.IS_AUTHENTICATED = flag === 'true';
      })();
    </script>
</head>
  <body data-is-authenticated="{{ 'true' if session.get('user_id') else 'false' }}"{% if page == 'start' %} class="start-page"{% elif page == 'quiz' %} class="quiz-page"{% elif page == 'admin' %} class="admin-body"{% endif %}>
  <script>
    (function () {
      try {
        var stored = null;
        try {
          stored = localStorage.getItem('iv_theme');
        } catch (e) {
          stored = null;
        }
        var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        var theme = stored || (prefersDark ? 'theme-dark' : 'theme-light');
        var body = document.body;
        if (body) {
          body.classList.remove('theme-light', 'theme-dark');
          body.classList.add(theme);
          body.dataset.theme = theme;
        }
        document.documentElement.dataset.theme = theme;
        document.documentElement.style.colorScheme = theme === 'theme-dark' ? 'dark' : 'light';
      } catch (e) {
        // ignore theme storage errors
      }
    })();
  </script>
  {% if page != 'admin' %}
  <button class="theme-toggle" type="button" data-theme-toggle aria-label="Toggle theme">
    <span class="theme-toggle-icon theme-toggle-icon-sun" aria-hidden="true">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="4"></circle>
        <path d="M12 2v2"></path>
        <path d="M12 20v2"></path>
        <path d="M4.93 4.93l1.41 1.41"></path>
        <path d="M17.66 17.66l1.41 1.41"></path>
        <path d="M2 12h2"></path>
        <path d="M20 12h2"></path>
        <path d="M4.93 19.07l1.41-1.41"></path>
        <path d="M17.66 6.34l1.41-1.41"></path>
      </svg>
    </span>
    <span class="theme-toggle-icon theme-toggle-icon-moon" aria-hidden="true">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
      </svg>
    </span>
  </button>
  {% endif %}
    {% if page == 'start' %}
  <script>document.body.classList.add('heading-anim-init');</script>
  <div id="logout-toast" class="logout-toast" role="alert" aria-live="polite" aria-hidden="{{ 'false' if logout_message|default('') else 'true' }}" data-logout-active="{{ '1' if logout_message|default('') else '0' }}" tabindex="-1" aria-labelledby="logout-toast-message">
    <div class="logout-toast-content">
      <p id="logout-toast-message" class="logout-toast-message">{{ logout_message|default('') }}</p>
      <button type="button" class="logout-toast-close" aria-label="Close" data-dismiss-toast>
        <span class="sr-only">Close</span>
        <svg class="logout-toast-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M18 6 6 18"></path>
          <path d="m6 6 12 12"></path>
        </svg>
      </button>
    </div>
  </div>
  {% if logout_message|default('') %}
  <script>
    (function () {
      try {
        if (window.history && window.history.replaceState) {
          window.history.replaceState(null, document.title, window.location.pathname);
          window.history.pushState(null, document.title, window.location.pathname);
          window.addEventListener('popstate', function () {
            window.history.pushState(null, document.title, window.location.pathname);
          });
        }
      } catch (e) {
        // ignore history API errors
      }
    })();
  </script>
  {% endif %}
  <div class="start-shell">
    <h1 class="start-heading" aria-label="INTERVBOT"><span class="start-heading-left">INTERV</span><span class="start-heading-bar" aria-hidden="true"></span><span class="start-heading-right">BOT</span></h1>
    <p class="start-subheading" aria-live="polite">Smart Virtual Interviewer</p>
    <a class="start-cta" href="{{ url_for('login') }}" aria-label="Proceed">Proceed</a>

    <div class="ambient-cluster" aria-hidden="true">
      <img src="{{ url_for('static', filename='assets/demo1.png') }}" alt="" class="ambient ambient-1" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo2.png') }}" alt="" class="ambient ambient-2" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo3.png') }}" alt="" class="ambient ambient-3" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo4.png') }}" alt="" class="ambient ambient-4" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo5.png') }}" alt="" class="ambient ambient-5" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo6.png') }}" alt="" class="ambient ambient-6" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo7.png') }}" alt="" class="ambient ambient-7" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo8.png') }}" alt="" class="ambient ambient-8" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo9.png') }}" alt="" class="ambient ambient-9" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo10.png') }}" alt="" class="ambient ambient-10" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo11.png') }}" alt="" class="ambient ambient-11" loading="lazy" />
    </div>


    <div class="start-auth">
      <main class="dark start-auth-main">
        <div>
          <button class="goo-button" type="button" data-goo-magnet="off">LOGIN</button>
        </div>
      </main>
      <main class="dark start-auth-main">
        <div>
          <button class="goo-button" type="button" data-goo-magnet="off">SIGNUP</button>
        </div>
      </main>
    </div>

  </div>

  <svg width="0" height="0" style="position: absolute;">
    <filter id="goo" x="-50%" y="-50%" width="200%" height="200%">
      <feComponentTransfer>
        <feFuncA type="discrete" tableValues="0 1"></feFuncA>
      </feComponentTransfer>
      <feGaussianBlur stdDeviation="5"></feGaussianBlur>
      <feComponentTransfer>
        <feFuncA type="table" tableValues="-5 11"></feFuncA>
      </feComponentTransfer>
    </filter>
  </svg>

  <script src="{{ url_for('static', filename='js/cursor.js') }}"></script>
  <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
  <script src="{{ url_for('static', filename='js/goo-buttons.js') }}"></script>
  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
  <script src="{{ url_for('static', filename='js/start.js') }}"></script>
    {% elif page == 'quiz' %}
    <div class="quiz-shell">
        <header class="quiz-header">
            <p class="quiz-label" id="quiz-label">Quiz</p>
            <p class="quiz-meta" id="quiz-meta"></p>
          <p class="quiz-timer" id="quiz-timer" aria-live="polite"><span class="quiz-timer-value" id="quiz-timer-value">00:00</span></p>
        </header>

        <section id="quiz-questions" class="quiz-questions" aria-live="polite"></section>

        <div class="quiz-nav">
            <span id="prev-question-btn" class="quiz-nav-text" role="button" tabindex="0">Previous</span>
            <button id="submit-quiz-btn" class="goo-button quiz-submit-center" type="button" data-goo-magnet="off" style="display:none;">Submit Quiz</button>
            <span id="next-question-btn" class="quiz-nav-text" role="button" tabindex="0">Next</span>
        </div>

        <div id="quiz-result" class="quiz-result" role="status" aria-live="polite"></div>

        <!-- quiz-actions container: keep visible so individual buttons can be toggled by JS -->
        <div class="quiz-actions">
            <button id="retake-quiz-btn" class="goo-button" type="button" style="display: none;" data-goo-magnet="off">Retake Quiz</button>
        </div>
    </div>

    <svg width="0" height="0" style="position: absolute;">
        <filter id="goo" x="-50%" y="-50%" width="200%" height="200%">
            <feComponentTransfer>
                <feFuncA type="discrete" tableValues="0 1"></feFuncA>
            </feComponentTransfer>
            <feGaussianBlur stdDeviation="5"></feGaussianBlur>
            <feComponentTransfer>
                <feFuncA type="table" tableValues="-5 11"></feComponentTransfer>
            </feComponentTransfer>
        </filter>
    </svg>

    <script src="{{ url_for('static', filename='js/cursor.js') }}"></script>
    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
    <script src="{{ url_for('static', filename='js/goo-buttons.js') }}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" integrity="sha512-qZvrmS2ekKPF2mSznTQsxqPgnpkI4DNTlrdUmTzrDgektczlKNRRhy5X5AAOnx5S09ydFYWWNSfcEqDTTHgtNA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="{{ url_for('static', filename='js/quiz.js') }}"></script>
    {% elif page == 'admin' %}
    {% set view = current_view or 'dashboard' %}
  <div class="admin-layout">
    <main class="admin-main">
      <nav class="admin-top-nav" aria-label="Admin navigation">
        <a class="admin-top-nav-link{% if view == 'dashboard' %} active{% endif %}" href="{{ url_for('admin.admin_dashboard') }}">Overview</a>
        <a class="admin-top-nav-link{% if view == 'users' %} active{% endif %}" href="{{ url_for('admin.admin_users') }}">Users</a>
        <a class="admin-top-nav-link" href="{{ url_for('landing') }}">Home</a>
        <a class="admin-top-nav-link" href="{{ url_for('logout') }}">Logout</a>
      </nav>

      {% with messages = get_flashed_messages() %}
        {% set ns = namespace(hero=None, danger=None, fallback=None) %}
        {% if messages %}
        {% set hero_messages = ['Account Created Successfully', 'Verification Code Sent to Your Email', 'Temporary Password Sent to Your Email'] %}
        {% set danger_messages = [
          'Name, Email and Password are Required',
          'Email and OTP are Required',
          'No Code Found. Please Signup Again',
          'Your Code is Expired. Resend Code',
          'Incorrect Verification Code. Please Try Again',
          'Your Signup Session Expired. Resend Code',
          'Failed to Create Account. Please try Again',
          'Failed to Send OTP. Please try Again',
          'Account Already Exists',
          'Email is Required',
          'No Account Exists with this Email',
          'Unable to Reset Password. Try Again',
          'Failed to Send Password. Please try Again',
          'Email and Password are Required',
          'Invalid credentials',
          'Unsupported Login Provider',
          'Google Login is not Configured Yet',
          'GitHub Login is not Configured Yet',
          'Server Misconfiguration. Please Contact Support',
          "Couldn't Signin. Please Try Again",
          "Couldn't Retrieve Your Profile From Provider",
          'Your Account Must Have Public Email to Signin',
          'Unable to Sign You In Right Now. Please Try Again Later',
          'Please Login to View Dashboard',
          'Admin Access Required',
          'Demo/test accounts are not managed from this panel.',
          'You cannot change your own admin status from this panel.',
          'User Not Found',
          'Temporary Password is Required to Reset User Password',
          'Email Already in Use. Try Another',
          'Admin Cannot Delete own Account from Panel'
        ] %}
        {% for message in messages %}
        {% if not ns.danger and message in danger_messages %}
        {% set ns.danger = message %}
        {% elif not ns.hero and message in hero_messages %}
        {% set ns.hero = message %}
        {% elif not ns.fallback %}
        {% set ns.fallback = message %}
        {% endif %}
        {% endfor %}
        {% endif %}
        {% if ns.hero %}
        <div id="logout-toast" class="logout-toast" role="alert" aria-live="polite" aria-hidden="false" data-logout-active="1" tabindex="-1" aria-labelledby="logout-toast-message">
          <div class="logout-toast-content">
            <p id="logout-toast-message" class="logout-toast-message">{{ ns.hero }}</p>
            <button type="button" class="logout-toast-close" aria-label="Close" data-dismiss-toast>
              <span class="sr-only">Close</span>
              <svg class="logout-toast-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M18 6 6 18"></path>
                <path d="m6 6 12 12"></path>
              </svg>
            </button>
          </div>
        </div>
        {% elif ns.danger %}
        <div id="logout-toast" class="logout-toast logout-toast--danger" role="alert" aria-live="assertive" aria-hidden="false" data-logout-active="1" tabindex="-1" aria-labelledby="logout-toast-message">
          <div class="logout-toast-content">
            <p id="logout-toast-message" class="logout-toast-message logout-toast-message--danger">&#9888;&#65039; {{ ns.danger }}</p>
            <button type="button" class="logout-toast-close" aria-label="Close" data-dismiss-toast>
              <span class="sr-only">Close</span>
              <svg class="logout-toast-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M18 6 6 18"></path>
                <path d="m6 6 12 12"></path>
              </svg>
            </button>
          </div>
        </div>
        {% elif ns.fallback %}
        <div id="logout-toast" class="logout-toast" role="alert" aria-live="polite" aria-hidden="false" data-logout-active="1" tabindex="-1" aria-labelledby="logout-toast-message">
          <div class="logout-toast-content">
            <p id="logout-toast-message" class="logout-toast-message">{{ ns.fallback }}</p>
            <button type="button" class="logout-toast-close" aria-label="Close" data-dismiss-toast>
              <span class="sr-only">Close</span>
              <svg class="logout-toast-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M18 6 6 18"></path>
                <path d="m6 6 12 12"></path>
              </svg>
            </button>
          </div>
        </div>
        {% endif %}
      {% endwith %}

      <section class="admin-content">
        {% if view == 'dashboard' %}
          <div class="admin-metrics">
            <article class="admin-card">
              <h2>Total Users</h2>
              <p class="admin-metric">{{ total_users | default(0) }}</p>
            </article>
            <article class="admin-card">
              <h2>Time Logs</h2>
              <p class="admin-metric">{{ total_time_logs | default(0) }}</p>
            </article>
          </div>

          <div class="admin-panels">
            <section class="admin-card">
              <header class="admin-card-header">
                <h2>Recent Users</h2>
              </header>
              <div class="admin-table-wrapper">
                <table class="admin-table">
                  <thead>
                    <tr>
                      <th>ID</th>
                      <th>Name</th>
                      <th>Email</th>
                      <th>Admin</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% set recent = recent_users | default([]) %}
                    {% for user in recent %}
                    <tr>
                      <td>{{ user.id }}</td>
                      <td>{{ user.name or '—' }}</td>
                      <td>{{ user.email }}</td>
                      <td>{{ 'Yes' if user.is_admin else 'No' }}</td>
                    </tr>
                    {% else %}
                    <tr><td colspan="4" class="admin-empty">No users yet.</td></tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </section>
          </div>
        {% elif view == 'users' %}
          <section class="admin-card">
            <header class="admin-card-header">
              <div>
                <h2>Users</h2>
                <p class="admin-card-sub">Promote trusted accounts and reset credentials when needed.</p>
              </div>
            </header>
            <div class="admin-table-wrapper">
              <table class="admin-table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Location</th>
                    <th>Toggle Admin</th>
                    <th>Reset Password</th>
                    <th>Edit</th>
                    <th>Delete User</th>
                  </tr>
                </thead>
                <tbody>
                  {% set all_users = users | default([]) %}
                  {% for user in all_users %}
                  {% set profile = profile_map.get(user.id) if profile_map is defined else None %}
                  <tr>
                    <td>{{ user.id }}</td>
                    <td>{{ user.name or '—' }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ profile.location if profile and profile.location else '—' }}</td>
                    <td>
                      <form method="post" action="{{ url_for('admin.admin_toggle_admin', user_id=user.id) }}" class="admin-inline-form">
                        <button type="submit" class="admin-btn admin-btn-secondary">{{ 'Remove Admin' if user.is_admin else 'Make Admin' }}</button>
                      </form>
                    </td>
                    <td>
                      <form method="post" action="{{ url_for('admin.admin_reset_password', user_id=user.id) }}" class="admin-inline-form">
                        <input type="text" name="temporary_password" placeholder="Temporary password" required />
                        <button type="submit" class="admin-btn">Set</button>
                      </form>
                    </td>
                    <td>
                      <details class="admin-inline-edit">
                        <summary class="admin-inline-edit-trigger">Edit</summary>
                        <form method="post" action="{{ url_for('admin.admin_update_user', user_id=user.id) }}" class="admin-inline-form admin-inline-edit-form">
                          <input type="text" name="name" placeholder="Name" value="{{ user.name or '' }}" />
                          <input type="email" name="email" placeholder="Email" value="{{ user.email or '' }}" required />
                          <input type="text" name="location" placeholder="Location" value="{{ profile.location if profile and profile.location else '' }}" />
                          <button type="submit" class="admin-btn">Save</button>
                        </form>
                      </details>
                    </td>
                    <td>
                      <form method="post" action="{{ url_for('admin.admin_delete_user', user_id=user.id) }}" class="admin-inline-form" onsubmit="return confirm('Delete this user permanently? This will remove their data.');">
                        <button type="submit" class="admin-btn admin-btn-danger">Delete</button>
                      </form>
                    </td>
                  </tr>
                  {% else %}
                  <tr><td colspan="8" class="admin-empty">No users found.</td></tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </section>
        {% endif %}
      </section>
    </main>
  </div>
  <script src="{{ url_for('static', filename='js/cursor.js') }}"></script>
  <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
  <script src="{{ url_for('static', filename='js/start.js') }}"></script>
    {% else %}
    {% if session.get('user_id') %}
    <div class="page-corner-dashboard">
      <a class="goo-button" href="{{ url_for('dashboard') }}" data-goo-magnet="off">DASHBOARD</a>
    </div>
    {% endif %}
    <div class="page-corner-leaderboard">
      <a class="goo-button" href="{{ url_for('leaderboard') }}" data-goo-magnet="off">LEADERBOARD</a>
    </div>
        <!-- Ambient animated background from Start page -->
        <div class="ambient-cluster" aria-hidden="true">
            <img src="{{ url_for('static', filename='assets/demo1.png') }}" alt="" class="ambient ambient-1" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo2.png') }}" alt="" class="ambient ambient-2" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo3.png') }}" alt="" class="ambient ambient-3" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo4.png') }}" alt="" class="ambient ambient-4" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo5.png') }}" alt="" class="ambient ambient-5" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo6.png') }}" alt="" class="ambient ambient-6" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo7.png') }}" alt="" class="ambient ambient-7" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo8.png') }}" alt="" class="ambient ambient-8" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo9.png') }}" alt="" class="ambient ambient-9" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo10.png') }}" alt="" class="ambient ambient-10" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo11.png') }}" alt="" class="ambient ambient-11" loading="lazy" />
        </div>

        <!-- Main App Container -->
    <div id="app-container" class="app-container" style="position:relative; z-index:2;">
        {# Dashboard removed — no corner button displayed #}
        <!-- LandingCard Component with Header -->
        <div id="landing-card" class="landing-card">
            <div class="landing-controls">
                <label>
                    <strong>Role</strong>
                    <select id="role-select">
                      <option value="General Interview">General Interview</option>
                      <option value="Behavioral Round">Behavioral Round</option>
                      <option value="HR Round">HR Round</option>
                      <option value="Mobile App Dev">Mobile App Dev</option>
                      <option value="Cloud Engineer">Cloud Engineer</option>
                      <option value="ML Engineer">ML Engineer</option>
                      <option value="AI Engineer">AI Engineer</option>
                      <option value="Full Stack Dev">Full Stack Dev</option>
                      <option value="Software Engineer">Software Engineer</option>
                      <option value="Data Engineer">Data Engineer</option>
                      <option value="Business Analyst">Business Analyst</option>
                      <option value="Data Analyst">Data Analyst</option>
                      <option value="UI/UX Designer">UI/UX Designer</option>
                      <option value="Product Designer">Product Designer</option>
                      <option value="QA Engineer">QA Engineer</option>
                      <option value="Network Engineer">Network Engineer</option>
                      <option value="IoT Engineer">IoT Engineer</option>
                      <option value="Sales Engineer">Sales Engineer</option>
                      <option value="Game Developer">Game Developer</option>
                      <option value="Blockchain Developer">Blockchain Developer</option>
                    </select>
                </label>

                <label>
                    <strong>Questions</strong>
                    <input type="number" id="question-limit" min="1" max="100" value="1" placeholder="Enter number">
                    <div id="limit-warning" style="color: red; font-size: 12px; margin-top: 4px; display: none;">
                        ⚠️ Invalid Question
                    </div>
                </label>

                <label>
                    <strong>Difficulty</strong>
                    <select id="difficulty-select">
                        <option value="Easy">Beginner</option>
                        <option value="Medium">Intermediate</option>
                        <option value="Hard">Professional</option>
                    </select>
                </label>
            </div>

            <div class="landing-widgets">
              <article class="chart-card chart-card--doughnut" aria-label="Session totals">
                <h3 class="chart-title">Sessions</h3>
                <div class="chart-body">
                  <div class="chart-canvas">
                    <canvas id="landingDonut"></canvas>
                  </div>
                  <div id="landingDonutLegend" class="chart-legend"></div>
                </div>
              </article>
              <section class="badge-card" aria-label="Achievement badges">
                <h3 class="badge-title">Achievements</h3>
                <div class="badge-list">
                  <div class="badge-item" data-tooltip="First interview completed">
                    <img src="{{ url_for('static', filename='assets/interviewhero.png') }}" alt="Interview Hero" />
                    <span>Interview Hero</span>
                  </div>
                  <div class="badge-item" data-tooltip="5 quizzes completed">
                    <img src="{{ url_for('static', filename='assets/skilledperformer.png') }}" alt="Skilled Performer" />
                    <span>Skilled Performer</span>
                  </div>
                  <div class="badge-item" data-tooltip="7 day streak">
                    <img src="{{ url_for('static', filename='assets/risinglerner.png') }}" alt="Rising Learner" />
                    <span>Rising Learner</span>
                  </div>
                </div>
              </section>
            </div>

            <div style="display: flex; justify-content: center;">
                <main id="app" class="dark">
                    <div style="display: flex; gap: 16px; justify-content: center;">
                        <button id="start-btn" class="goo-button" type="button" data-goo-magnet="off">AI Interview</button>
                        <button id="take-quiz-btn" class="goo-button" type="button" data-goo-magnet="off">Take Quiz</button>
                    </div>
                </main>
            </div>
        </div>

        <!-- Interview Screen -->
        <div id="interview-screen" style="display: none;">
            <!-- QuestionBox Component -->
            <div id="question-box" class="question-box">
                <!-- Question content will be dynamically loaded -->
            </div>

            <!-- Answer Input Area -->
            <div class="answer-input-wrapper">
                <textarea id="answer-box" class="answer-box" placeholder="Type Answer or Use Mic.."></textarea>
                
                <!-- Mic Button -->
                <button id="mic-icon-btn" class="mic-icon-btn">
                    <img src="{{ url_for('static', filename='assets/icons/mic.png') }}" alt="Mic">
                </button>
            </div>

            <!-- Answer Warning -->
            <div id="answer-warning" style="color: red; margin-top: 6px; font-size: 14px; display: none;">
                ⚠️ Please Answer the Question
            </div>

            <!-- Submit Button -->
            <div style="display: flex; gap: 10px; margin-top: 10px; justify-content: center;">
                <button id="submit-btn" class="goo-button" type="button" data-goo-magnet="off">Submit</button>
            </div>

            <!-- Loading Indicator -->
            <div id="loading-indicator" style="text-align: center; display: none;">
                <div style="color: #1D4ED8; font-size: 20px;">Loading questions...</div>
            </div>
        </div>

        <!-- Results Section -->
        <div id="results-section" style="display: none;">
            <h2 class="feedback-heading">Result Analysis</h2>
            <div id="results-content">
                <!-- Results will be dynamically loaded -->
            </div>

            <div id="overall-result" class="feedback-box" style="background: transparent; display: none;">
                <h3 style="margin-bottom: 8px;">Overall Result</h3>
                <p><strong>Overall Accuracy Score:</strong> <span id="overall-score">0</span>%</p>
            </div>

            <div style="display: flex; justify-content: center; margin-top: 20px;">
                <button id="restart-btn" class="goo-button" type="button" data-goo-magnet="off">Start Again</button>
            </div>
        </div>
    </div>

        <svg width="0" height="0" style="position: absolute;">
            <filter id="goo" x="-50%" y="-50%" width="200%" height="200%">
                <feComponentTransfer>
                    <feFuncA type="discrete" tableValues="0 1"></feFuncA>
                </feComponentTransfer>
                <feGaussianBlur stdDeviation="5"></feGaussianBlur>
                <feComponentTransfer>
                    <feFuncA type="table" tableValues="-5 11"></feComponentTransfer>
                </feComponentTransfer>
            </filter>
        </svg>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/cursor.js') }}"></script>
    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
    <script src="{{ url_for('static', filename='js/goo-buttons.js') }}"></script>
    <script src="{{ url_for('static', filename='js/start.js') }}"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    {% endif %}

    <script src="{{ url_for('static', filename='js/back-logout.js') }}"></script>
</body>
</html>