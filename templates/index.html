<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page == 'start' %}IntervBot • Practice Smarter{% elif page == 'quiz' %}Quiz | Virtual Interviewer{% elif page == 'admin' %}{{ title or 'Admin Panel' }} • IntervBot{% else %}Virtual Interviewer{% endif %}</title>
    {% if page == 'admin' %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/start.css') }}">
    {% else %}
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/start.css') }}">
    {% if page == 'quiz' %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/quiz.css') }}">
    {% endif %}
    {% endif %}
    <link rel="icon" href="{{ url_for('static', filename='assets/favicon.png') }}">
    <script>
      // Expose auth state to client scripts to prevent unauthorized calls
      window.IS_AUTHENTICATED = {{ 'true' if session.get('user_id') else 'false' }};
    </script>
</head>
  <body{% if page == 'start' %} class="start-page"{% elif page == 'quiz' %} class="quiz-page"{% elif page == 'admin' %} class="admin-body"{% endif %}>
    {% if page == 'start' %}
  <script>document.body.classList.add('heading-anim-init');</script>
  <div id="logout-toast" class="logout-toast" role="alert" aria-live="polite" aria-hidden="{{ 'false' if logout_message|default('') else 'true' }}" data-logout-active="{{ '1' if logout_message|default('') else '0' }}" tabindex="-1" aria-labelledby="logout-toast-message">
    <div class="logout-toast-content">
      <p id="logout-toast-message" class="logout-toast-message">{{ logout_message|default('') }}</p>
      <button type="button" class="logout-toast-close" aria-label="Close" data-dismiss-toast>
        <span class="sr-only">Close</span>
        <svg class="logout-toast-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M18 6 6 18"></path>
          <path d="m6 6 12 12"></path>
        </svg>
      </button>
    </div>
  </div>
  <div class="start-shell">
    <h1 class="start-heading" aria-label="INTERVBOT"><span class="start-heading-left">INTERV</span><span class="start-heading-bar" aria-hidden="true"></span><span class="start-heading-right">BOT</span></h1>

    <div class="ambient-cluster" aria-hidden="true">
      <img src="{{ url_for('static', filename='assets/demo1.png') }}" alt="" class="ambient ambient-1" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo2.png') }}" alt="" class="ambient ambient-2" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo3.png') }}" alt="" class="ambient ambient-3" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo4.png') }}" alt="" class="ambient ambient-4" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo5.png') }}" alt="" class="ambient ambient-5" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo6.png') }}" alt="" class="ambient ambient-6" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo7.png') }}" alt="" class="ambient ambient-7" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo8.png') }}" alt="" class="ambient ambient-8" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo9.png') }}" alt="" class="ambient ambient-9" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo10.png') }}" alt="" class="ambient ambient-10" loading="lazy" />
      <img src="{{ url_for('static', filename='assets/demo11.png') }}" alt="" class="ambient ambient-11" loading="lazy" />
    </div>

    <div class="container">
      <label for="switch" class="toggle">
        <input type="checkbox" class="input" id="switch" />
        <div class="icon icon--moon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="32" height="32">
            <path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z" clip-rule="evenodd"></path>
          </svg>
        </div>

        <div class="icon icon--sun">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="32" height="32">
            <path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z"></path>
          </svg>
        </div>
      </label>
    </div>

    <div class="start-auth">
      <main class="dark start-auth-main">
        <div>
          <button class="goo-button" type="button" data-goo-magnet="off">LOGIN</button>
        </div>
      </main>
      <main class="dark start-auth-main">
        <div>
          <button class="goo-button" type="button" data-goo-magnet="off">SIGNUP</button>
        </div>
      </main>
    </div>

  </div>

  <div class="admin-dock" aria-label="Admin quick links">
    <div class="admin-badge" role="button" tabindex="0" aria-label="Show admin links" aria-expanded="false">
      <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24">
        <g fill="none">
          <path d="M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z" />
          <path fill="currentColor" d="M16 14a5 5 0 0 1 5 5v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1a5 5 0 0 1 5-5h8Zm4-6a1 1 0 0 1 1 1v1h1a1 1 0 1 1 0 2h-1v1a1 1 0 1 1-2 0v-1h-1a1 1 0 1 1 0-2h1V9a1 1 0 0 1 1-1Zm-8-6a5 5 0 1 1 0 10a5 5 0 0 1 0-10Z" />
        </g>
      </svg>
    </div>
    <div class="admin-links" aria-label="Social profiles" aria-hidden="true">
      <button class="social-icon" type="button" data-social="website" data-url="https://www.asimhusain.dev" aria-label="Website" title="Website">
        <span class="social-tooltip" role="tooltip">Website</span>
        <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 32 32" fill="currentColor" aria-hidden="true">
          <path d="M28 10h-6V6a2 2 0 0 0-2-2h-8a2 2 0 0 0-2 2v4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V12a2 2 0 0 0-2-2ZM12 6h8v4h-8ZM4 26V12h24v14Z" />
        </svg>
      </button>
      <button class="social-icon" type="button" data-social="github" data-url="https://github.com/asimhusain-ai" aria-label="GitHub" title="GitHub">
        <span class="social-tooltip" role="tooltip">GitHub</span>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.387.6.111.82-.261.82-.577 0-.285-.01-1.04-.016-2.04-3.338.724-4.042-1.416-4.042-1.416-.546-1.387-1.333-1.757-1.333-1.757-1.089-.745.083-.73.083-.73 1.205.085 1.84 1.236 1.84 1.236 1.07 1.834 2.809 1.304 3.495.997.108-.775.418-1.305.76-1.605-2.665-.304-5.467-1.334-5.467-5.93 0-1.31.468-2.381 1.235-3.221-.124-.303-.535-1.525.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.289-1.552 3.296-1.23 3.296-1.23.653 1.651.242 2.873.118 3.176.77.84 1.232 1.911 1.232 3.221 0 4.61-2.807 5.624-5.479 5.921.43.371.823 1.102.823 2.222 0 1.606-.015 2.904-.015 3.296 0 .319.216.694.825.576C20.565 22.092 24 17.595 24 12.297 24 5.67 18.627.297 12 .297z" />
        </svg>
      </button>
      <button class="social-icon" type="button" data-social="linkedin" data-url="https://www.linkedin.com/in/asimhusain1-ai" aria-label="LinkedIn" title="LinkedIn">
        <span class="social-tooltip" role="tooltip">LinkedIn</span>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor" aria-hidden="true">
          <path d="M196.3 512L103.4 512L103.4 212.9L196.3 212.9L196.3 512zM149.8 172.1C120.1 172.1 96 147.5 96 117.8C96 103.5 101.7 89.9 111.8 79.8C121.9 69.7 135.6 64 149.8 64C164 64 177.7 69.7 187.8 79.8C197.9 89.9 203.6 103.6 203.6 117.8C203.6 147.5 179.5 172.1 149.8 172.1zM543.9 512L451.2 512L451.2 366.4C451.2 331.7 450.5 287.2 402.9 287.2C354.6 287.2 347.2 324.9 347.2 363.9L347.2 512L254.4 512L254.4 212.9L343.5 212.9L343.5 253.7L344.8 253.7C357.2 230.2 387.5 205.4 432.7 205.4C526.7 205.4 544 267.3 544 347.7L544 512L543.9 512z" />
        </svg>
      </button>
    </div>
  </div>

  <svg width="0" height="0" style="position: absolute;">
    <filter id="goo" x="-50%" y="-50%" width="200%" height="200%">
      <feComponentTransfer>
        <feFuncA type="discrete" tableValues="0 1"></feFuncA>
      </feComponentTransfer>
      <feGaussianBlur stdDeviation="5"></feGaussianBlur>
      <feComponentTransfer>
        <feFuncA type="table" tableValues="-5 11"></feFuncA>
      </feComponentTransfer>
    </filter>
  </svg>

  <script src="{{ url_for('static', filename='js/cursor.js') }}"></script>
  <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
  <script src="{{ url_for('static', filename='js/goo-buttons.js') }}"></script>
  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
  <script src="{{ url_for('static', filename='js/start.js') }}"></script>
    {% elif page == 'quiz' %}
    <div class="quiz-shell">
        <header class="quiz-header">
            <p class="quiz-label" id="quiz-label">Quiz</p>
            <p class="quiz-meta" id="quiz-meta"></p>
          <p class="quiz-timer" id="quiz-timer" aria-live="polite"><span class="quiz-timer-value" id="quiz-timer-value">00:00</span></p>
        </header>

        <section id="quiz-questions" class="quiz-questions" aria-live="polite"></section>

        <div class="quiz-nav">
            <span id="prev-question-btn" class="quiz-nav-text" role="button" tabindex="0">Previous</span>
            <button id="submit-quiz-btn" class="goo-button quiz-submit-center" type="button" data-goo-magnet="off" style="display:none;">Submit Quiz</button>
            <span id="next-question-btn" class="quiz-nav-text" role="button" tabindex="0">Next</span>
        </div>

        <div id="quiz-result" class="quiz-result" role="status" aria-live="polite"></div>

        <!-- quiz-actions container: keep visible so individual buttons can be toggled by JS -->
        <div class="quiz-actions">
            <button id="retake-quiz-btn" class="goo-button" type="button" style="display: none;" data-goo-magnet="off">Retake Quiz</button>
        </div>
    </div>

    <svg width="0" height="0" style="position: absolute;">
        <filter id="goo" x="-50%" y="-50%" width="200%" height="200%">
            <feComponentTransfer>
                <feFuncA type="discrete" tableValues="0 1"></feFuncA>
            </feComponentTransfer>
            <feGaussianBlur stdDeviation="5"></feGaussianBlur>
            <feComponentTransfer>
                <feFuncA type="table" tableValues="-5 11"></feComponentTransfer>
            </feComponentTransfer>
        </filter>
    </svg>

    <script src="{{ url_for('static', filename='js/cursor.js') }}"></script>
    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
    <script src="{{ url_for('static', filename='js/goo-buttons.js') }}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" integrity="sha512-qZvrmS2ekKPF2mSznTQsxqPgnpkI4DNTlrdUmTzrDgektczlKNRRhy5X5AAOnx5S09ydFYWWNSfcEqDTTHgtNA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="{{ url_for('static', filename='js/quiz.js') }}"></script>
    {% elif page == 'admin' %}
    {% set view = current_view or 'dashboard' %}
  <div class="admin-layout">
    <main class="admin-main">
      <nav class="admin-top-nav" aria-label="Admin navigation">
        <a class="admin-top-nav-link{% if view == 'dashboard' %} active{% endif %}" href="{{ url_for('admin.admin_dashboard') }}">Overview</a>
        <a class="admin-top-nav-link{% if view == 'users' %} active{% endif %}" href="{{ url_for('admin.admin_users') }}">Users</a>
        <a class="admin-top-nav-link" href="{{ url_for('logout') }}">Logout</a>
      </nav>

      {% with messages = get_flashed_messages() %}
        {% set ns = namespace(hero=None, danger=None, fallback=None) %}
        {% if messages %}
        {% set hero_messages = ['Account Created Successfully', 'Verification Code Sent to Your Email', 'Temporary Password Sent to Your Email'] %}
        {% set danger_messages = [
          'Name, Email and Password are Required',
          'Email and OTP are Required',
          'No Code Found. Please Signup Again',
          'Your Code is Expired. Resend Code',
          'Incorrect Verification Code. Please Try Again',
          'Your Signup Session Expired. Resend Code',
          'Failed to Create Account. Please try Again',
          'Failed to Send OTP. Please try Again',
          'Account Already Exists',
          'Email is Required',
          'No Account Exists with this Email',
          'Unable to Reset Password. Try Again',
          'Failed to Send Password. Please try Again',
          'Email and Password are Required',
          'Invalid credentials',
          'Unsupported Login Provider',
          'Google Login is not Configured Yet',
          'GitHub Login is not Configured Yet',
          'Server Misconfiguration. Please Contact Support',
          "Couldn't Signin. Please Try Again",
          "Couldn't Retrieve Your Profile From Provider",
          'Your Account Must Have Public Email to Signin',
          'Unable to Sign You In Right Now. Please Try Again Later',
          'Please Login to View Dashboard',
          'Admin Access Required',
          'Demo/test accounts are not managed from this panel.',
          'You cannot change your own admin status from this panel.',
          'User Not Found',
          'Temporary Password is Required to Reset User Password',
          'Email Already in Use. Try Another',
          'Admin Cannot Delete own Account from Panel'
        ] %}
        {% for message in messages %}
        {% if not ns.danger and message in danger_messages %}
        {% set ns.danger = message %}
        {% elif not ns.hero and message in hero_messages %}
        {% set ns.hero = message %}
        {% elif not ns.fallback %}
        {% set ns.fallback = message %}
        {% endif %}
        {% endfor %}
        {% endif %}
        {% if ns.hero %}
        <div id="logout-toast" class="logout-toast" role="alert" aria-live="polite" aria-hidden="false" data-logout-active="1" tabindex="-1" aria-labelledby="logout-toast-message">
          <div class="logout-toast-content">
            <p id="logout-toast-message" class="logout-toast-message">{{ ns.hero }}</p>
            <button type="button" class="logout-toast-close" aria-label="Close" data-dismiss-toast>
              <span class="sr-only">Close</span>
              <svg class="logout-toast-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M18 6 6 18"></path>
                <path d="m6 6 12 12"></path>
              </svg>
            </button>
          </div>
        </div>
        {% elif ns.danger %}
        <div id="logout-toast" class="logout-toast logout-toast--danger" role="alert" aria-live="assertive" aria-hidden="false" data-logout-active="1" tabindex="-1" aria-labelledby="logout-toast-message">
          <div class="logout-toast-content">
            <p id="logout-toast-message" class="logout-toast-message logout-toast-message--danger">&#9888;&#65039; {{ ns.danger }}</p>
            <button type="button" class="logout-toast-close" aria-label="Close" data-dismiss-toast>
              <span class="sr-only">Close</span>
              <svg class="logout-toast-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M18 6 6 18"></path>
                <path d="m6 6 12 12"></path>
              </svg>
            </button>
          </div>
        </div>
        {% elif ns.fallback %}
        <div id="logout-toast" class="logout-toast" role="alert" aria-live="polite" aria-hidden="false" data-logout-active="1" tabindex="-1" aria-labelledby="logout-toast-message">
          <div class="logout-toast-content">
            <p id="logout-toast-message" class="logout-toast-message">{{ ns.fallback }}</p>
            <button type="button" class="logout-toast-close" aria-label="Close" data-dismiss-toast>
              <span class="sr-only">Close</span>
              <svg class="logout-toast-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M18 6 6 18"></path>
                <path d="m6 6 12 12"></path>
              </svg>
            </button>
          </div>
        </div>
        {% endif %}
      {% endwith %}

      <section class="admin-content">
        {% if view == 'dashboard' %}
          <div class="admin-metrics">
            <article class="admin-card">
              <h2>Total Users</h2>
              <p class="admin-metric">{{ total_users | default(0) }}</p>
            </article>
            <article class="admin-card">
              <h2>Time Logs</h2>
              <p class="admin-metric">{{ total_time_logs | default(0) }}</p>
            </article>
          </div>

          <div class="admin-panels">
            <section class="admin-card">
              <header class="admin-card-header">
                <h2>Recent Users</h2>
              </header>
              <div class="admin-table-wrapper">
                <table class="admin-table">
                  <thead>
                    <tr>
                      <th>ID</th>
                      <th>Name</th>
                      <th>Email</th>
                      <th>Admin</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% set recent = recent_users | default([]) %}
                    {% for user in recent %}
                    <tr>
                      <td>{{ user.id }}</td>
                      <td>{{ user.name or '—' }}</td>
                      <td>{{ user.email }}</td>
                      <td>{{ 'Yes' if user.is_admin else 'No' }}</td>
                    </tr>
                    {% else %}
                    <tr><td colspan="4" class="admin-empty">No users yet.</td></tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </section>
          </div>
        {% elif view == 'users' %}
          <section class="admin-card">
            <header class="admin-card-header">
              <div>
                <h2>Users</h2>
                <p class="admin-card-sub">Promote trusted accounts and reset credentials when needed.</p>
              </div>
            </header>
            <div class="admin-table-wrapper">
              <table class="admin-table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Location</th>
                    <th>Toggle Admin</th>
                    <th>Reset Password</th>
                    <th>Edit</th>
                    <th>Delete User</th>
                  </tr>
                </thead>
                <tbody>
                  {% set all_users = users | default([]) %}
                  {% for user in all_users %}
                  {% set profile = profile_map.get(user.id) if profile_map is defined else None %}
                  <tr>
                    <td>{{ user.id }}</td>
                    <td>{{ user.name or '—' }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ profile.location if profile and profile.location else '—' }}</td>
                    <td>
                      <form method="post" action="{{ url_for('admin.admin_toggle_admin', user_id=user.id) }}" class="admin-inline-form">
                        <button type="submit" class="admin-btn admin-btn-secondary">{{ 'Remove Admin' if user.is_admin else 'Make Admin' }}</button>
                      </form>
                    </td>
                    <td>
                      <form method="post" action="{{ url_for('admin.admin_reset_password', user_id=user.id) }}" class="admin-inline-form">
                        <input type="text" name="temporary_password" placeholder="Temporary password" required />
                        <button type="submit" class="admin-btn">Set</button>
                      </form>
                    </td>
                    <td>
                      <details class="admin-inline-edit">
                        <summary class="admin-inline-edit-trigger">Edit</summary>
                        <form method="post" action="{{ url_for('admin.admin_update_user', user_id=user.id) }}" class="admin-inline-form admin-inline-edit-form">
                          <input type="text" name="name" placeholder="Name" value="{{ user.name or '' }}" />
                          <input type="email" name="email" placeholder="Email" value="{{ user.email or '' }}" required />
                          <input type="text" name="location" placeholder="Location" value="{{ profile.location if profile and profile.location else '' }}" />
                          <button type="submit" class="admin-btn">Save</button>
                        </form>
                      </details>
                    </td>
                    <td>
                      <form method="post" action="{{ url_for('admin.admin_delete_user', user_id=user.id) }}" class="admin-inline-form" onsubmit="return confirm('Delete this user permanently? This will remove their data.');">
                        <button type="submit" class="admin-btn admin-btn-danger">Delete</button>
                      </form>
                    </td>
                  </tr>
                  {% else %}
                  <tr><td colspan="8" class="admin-empty">No users found.</td></tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </section>
        {% endif %}
      </section>
    </main>
  </div>
  <script src="{{ url_for('static', filename='js/cursor.js') }}"></script>
  <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
  <script src="{{ url_for('static', filename='js/start.js') }}"></script>
    {% else %}
    <div class="container">
      <label for="switch" class="toggle">
        <input type="checkbox" class="input" id="switch" />
        <div class="icon icon--moon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="32" height="32">
            <path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z" clip-rule="evenodd"></path>
          </svg>
        </div>

        <div class="icon icon--sun">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="32" height="32">
            <path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z"></path>
          </svg>
        </div>
      </label>
    </div>
    {% if session.get('user_id') %}
    <div class="page-corner-dashboard">
      <a class="goo-button" href="{{ url_for('dashboard') }}" data-goo-magnet="off">DASHBOARD</a>
    </div>
    {% endif %}
    <div class="page-corner-leaderboard">
      <a class="goo-button" href="{{ url_for('leaderboard') }}" data-goo-magnet="off">LEADERBOARD</a>
    </div>
        <!-- Ambient animated background from Start page -->
        <div class="ambient-cluster" aria-hidden="true">
            <img src="{{ url_for('static', filename='assets/demo1.png') }}" alt="" class="ambient ambient-1" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo2.png') }}" alt="" class="ambient ambient-2" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo3.png') }}" alt="" class="ambient ambient-3" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo4.png') }}" alt="" class="ambient ambient-4" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo5.png') }}" alt="" class="ambient ambient-5" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo6.png') }}" alt="" class="ambient ambient-6" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo7.png') }}" alt="" class="ambient ambient-7" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo8.png') }}" alt="" class="ambient ambient-8" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo9.png') }}" alt="" class="ambient ambient-9" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo10.png') }}" alt="" class="ambient ambient-10" loading="lazy" />
            <img src="{{ url_for('static', filename='assets/demo11.png') }}" alt="" class="ambient ambient-11" loading="lazy" />
        </div>

        <!-- Main App Container -->
    <div id="app-container" class="app-container" style="position:relative; z-index:2;">
        {# Dashboard removed — no corner button displayed #}
        <!-- LandingCard Component with Header -->
        <div id="landing-card" class="landing-card">
            <div class="landing-controls">
                <label>
                    <strong>Role</strong>
                    <select id="role-select">
                      <option value="General Interview">General Interview</option>
                      <option value="Behavioral Round">Behavioral Round</option>
                      <option value="HR Round">HR Round</option>
                      <option value="Mobile App Dev">Mobile App Dev</option>
                      <option value="Cloud Engineer">Cloud Engineer</option>
                      <option value="ML Engineer">ML Engineer</option>
                      <option value="AI Engineer">AI Engineer</option>
                      <option value="Full Stack Dev">Full Stack Dev</option>
                      <option value="Software Engineer">Software Engineer</option>
                      <option value="Data Engineer">Data Engineer</option>
                      <option value="Business Analyst">Business Analyst</option>
                      <option value="Data Analyst">Data Analyst</option>
                      <option value="UI/UX Designer">UI/UX Designer</option>
                      <option value="Product Designer">Product Designer</option>
                      <option value="QA Engineer">QA Engineer</option>
                      <option value="Network Engineer">Network Engineer</option>
                      <option value="IoT Engineer">IoT Engineer</option>
                      <option value="Sales Engineer">Sales Engineer</option>
                      <option value="Game Developer">Game Developer</option>
                      <option value="Blockchain Developer">Blockchain Developer</option>
                    </select>
                </label>

                <label>
                    <strong>Questions</strong>
                    <input type="number" id="question-limit" min="1" max="100" value="1" placeholder="Enter number">
                    <div id="limit-warning" style="color: red; font-size: 12px; margin-top: 4px; display: none;">
                        ⚠️ Invalid Question
                    </div>
                </label>

                <label>
                    <strong>Difficulty</strong>
                    <select id="difficulty-select">
                        <option value="Easy">Beginner</option>
                        <option value="Medium">Intermediate</option>
                        <option value="Hard">Professional</option>
                    </select>
                </label>
            </div>

            <div style="display: flex; justify-content: center;">
                <main id="app" class="dark">
                    <div style="display: flex; gap: 16px; justify-content: center;">
                        <button id="start-btn" class="goo-button" type="button" data-goo-magnet="off">AI Interview</button>
                        <button id="take-quiz-btn" class="goo-button" type="button" data-goo-magnet="off">Take Quiz</button>
                    </div>
                </main>
            </div>
        </div>

        <!-- Interview Screen -->
        <div id="interview-screen" style="display: none;">
            <!-- QuestionBox Component -->
            <div id="question-box" class="question-box">
                <!-- Question content will be dynamically loaded -->
            </div>

            <!-- Answer Input Area -->
            <div class="answer-input-wrapper">
                <textarea id="answer-box" class="answer-box" placeholder="Type Answer or Use Mic.."></textarea>
                
                <!-- Mic Button -->
                <button id="mic-icon-btn" class="mic-icon-btn">
                    <img src="{{ url_for('static', filename='assets/icons/mic.png') }}" alt="Mic">
                </button>
            </div>

            <!-- Answer Warning -->
            <div id="answer-warning" style="color: red; margin-top: 6px; font-size: 14px; display: none;">
                ⚠️ Please Answer the Question
            </div>

            <!-- Submit Button -->
            <div style="display: flex; gap: 10px; margin-top: 10px; justify-content: center;">
                <button id="submit-btn" class="goo-button" type="button" data-goo-magnet="off">Submit</button>
            </div>

            <!-- Loading Indicator -->
            <div id="loading-indicator" style="text-align: center; display: none;">
                <div style="color: #1D4ED8; font-size: 20px;">Loading questions...</div>
            </div>
        </div>

        <!-- Results Section -->
        <div id="results-section" style="display: none;">
            <h2 class="feedback-heading">Result Analysis</h2>
            <div id="results-content">
                <!-- Results will be dynamically loaded -->
            </div>

            <div id="overall-result" class="feedback-box" style="background: transparent; display: none;">
                <h3 style="margin-bottom: 8px;">Overall Result</h3>
                <p><strong>Overall Accuracy Score:</strong> <span id="overall-score">0</span>%</p>
            </div>

            <div style="display: flex; justify-content: center; margin-top: 20px;">
                <button id="restart-btn" class="goo-button" type="button" data-goo-magnet="off">Start Again</button>
            </div>
        </div>
    </div>

        <svg width="0" height="0" style="position: absolute;">
            <filter id="goo" x="-50%" y="-50%" width="200%" height="200%">
                <feComponentTransfer>
                    <feFuncA type="discrete" tableValues="0 1"></feFuncA>
                </feComponentTransfer>
                <feGaussianBlur stdDeviation="5"></feGaussianBlur>
                <feComponentTransfer>
                    <feFuncA type="table" tableValues="-5 11"></feComponentTransfer>
                </feComponentTransfer>
            </filter>
        </svg>

    <script src="{{ url_for('static', filename='js/cursor.js') }}"></script>
    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
    <script src="{{ url_for('static', filename='js/goo-buttons.js') }}"></script>
    <script src="{{ url_for('static', filename='js/start.js') }}"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    {% endif %}
</body>
</html>